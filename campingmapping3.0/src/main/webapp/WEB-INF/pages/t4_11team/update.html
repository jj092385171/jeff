<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>修改</title>
<script>
window.onload = function(){
	const form = document.getElementById('update');
	
	form.addEventListener('submit', function(event) {
	  event.preventDefault();

	  const formData = Array.from(this.elements).reduce(function(data, element) {
	    data[element.name] = element.value;
	    return data;
	  }, {});

	  const json = JSON.stringify(formData);

	  fetch('/campingmapping3.0/updateMaterial.controller', {
		  method: 'PUT',
		  headers: {
		    'Content-Type': 'application/json'
		  },
		  body: json
		})
		  .then(function(response) {
		    if(response.status == 200){
		    	location.href="/campingmapping3.0/team.controller";
		    }
		  });
	});
}
</script>
</head>
<body>
	<h3>修改</h3>
	<form id="update">
		<input type="hidden" id="initiatingnum" name="initiatingnum"><br><input type="hidden" id="postmember" name="postmember">
		<input type="hidden" id="postdate" name="postdate">
		起始日期:<input type="date" id="startdate" name="startdate" required><br>
		結束日期:<input type="date" id="enddate" name="enddate" required><br>
		現有人數:<input type="text" id="currentnum" name="currentnum"
			onkeyup="value=value.replace(/[^\d]/g,'') " required
			placeholder="請輸入現有人數,僅限數字"><br> 接受人數:<input type="text"
			id="acceptnum" name="acceptnum"
			onkeyup="value=value.replace(/[^\d]/g,'') " required
			placeholder="請輸入接受人數,僅限數字"><br> 露營地點:<input type="text"
			id="camparea" name="camparea" required placeholder="請輸入露營地點"><br>
		配對狀態:<input type="radio" id="pair" name="pair" value="0" checked>可配對<input type="radio" id="pair" name="pair" value="1">不可配對<br>
		<button type="submit" id="send" value="Send">Send</button>
	</form>
	<div id="result"></div>
	<script type="text/javascript">
		const urlParams = new URLSearchParams(window.location.search);
		const value1 = urlParams.get('dnum');
		const value2 = urlParams.get('pman');
		const value3 = urlParams.get('pday');
		const inputElement1 = document.getElementById('initiatingnum');
		inputElement1.value = value1;
		const inputElement2 = document.getElementById('postmember');
		inputElement2.value = value2;
		const inputElement3 = document.getElementById('postdate');
		inputElement3.value = value3;
	</script>
</body>
</html>
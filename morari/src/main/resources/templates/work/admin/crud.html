<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <script src="/morari/admin/js/head.js"></script>

    <!-- sharepage -->
    <script src="/morari/admin/js/share.js"></script>

</head>

<body id="page-top" style="display: none">

    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- sidebar -->
        <div class="sidebarshare"></div>
        <!-- sidebar end -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- topbar -->
                <div class="topbarshare"></div>
                <!-- topbar end -->

                <!-- Begin Page Content(開始主要內容區塊) -->
                <div class="container-fluid">
<!-- 這裡 -->
                    <div class="crud"></div>

                </div>
                <!-- /.container-fluid(結束主要內容區塊) -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <div class="footershare"></div>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="loginoutshare"></div>

    <!-- Bootstrap core JavaScript-->
    <script src="/morari/admin/vendor/jquery/jquery.min.js" ></script>
    <script src="/morari/admin/vendor/bootstrap/js/bootstrap.bundle.min.js" defer></script>

    <!-- Core plugin JavaScript-->
    <script src="/morari/admin/vendor/jquery-easing/jquery.easing.min.js" defer></script>

    <!-- Custom scripts for all pages-->
    <script src="/morari/admin/js/sb-admin-2.min.js" defer></script>

    <!-- Page level plugins -->
    <script src="/morari/admin/vendor/chart.js/Chart.min.js" defer></script>

    <!-- Page level custom scripts -->
    <script src="/morari/admin/js/demo/chart-area-demo.js" defer></script>
    <script src="/morari/admin/js/demo/chart-pie-demo.js" defer></script>
    <script src="/morari/work/js/jobCRUD.js" defer></script>
    <script type="text/javascript">
    $(document).ready(function() {
    	$.ajax({
    		type: 'POST',
    		url: '/morari/admin/work/jobShowAll.controller',
    		contentType: 'application/json',
    		//data: JSON.stringify(getFormData($("#insert"))),
    		success: function(data) {
    			$('#showInsert').empty("");

    			if (data == null) {
    				$('table').prepend("<tr><td colspan='2'>暫無資料</td></tr>");
    			} else {
    				//var h3 = $('#su');
    				//h3.prepend('新增成功');
    				var table = $('#showInsert');
    				table.append("<tr><th>會員編號</th><th>刊登編號</th><th>刊登時間</th><th>職缺</th><th>薪資</th><th>人數</th><th>地點</th><th>可上班日期</th><th>可上班時段</th><th>備註</th><th>照片</th><th></th></tr>");


    				$.each(data, function(i, n) {
    					var tr = "<tr align='center'>" +
    						"<td>" + n.uid + "</td>" +
    						"<td>" + n.rackid + "</td>" +
    						"<td>" + n.rackup + "</td>" +
    						"<td>" + n.job + "</td>" +
    						"<td>" + n.salary + "</td>" +
    						"<td>" + n.quantity + "</td>" +
    						"<td>" + n.place + "</td>" +
    						"<td>" + n.date + "</td>" +
    						"<td>" + n.time + "</td>" +
    						"<td>" + n.remark + "</td>" +
    						"<td>" + n.img + "</td>" +
    						"<td><form action='update.controller/" + n.rackid + "' method='POST'><input type='submit' value='修改'></form></td>" +
    						"<td><button id='delete' onclick='jobDelete(" + n.rackid + ")'>刪除</button></td>" + "</tr>";
    					table.append(tr);
    				});
    			}
    		}
    	});

    });
    function jobDelete(rackid) {
    	if (confirm("確定刪除該筆資料(刊登編號:" + rackid + ")?")) {
    		$.ajax({
    			type: 'delete',
    			url: '/morari/admin/work/jobDelete.controller/' + rackid,
    			dataType: 'TEXT',
    			success: function(data) {
    				alert(data);
    				location.reload();
    			}
    		});
    	} else {
    	}
    };</script>

</body>

</html>
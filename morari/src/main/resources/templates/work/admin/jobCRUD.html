<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>JobCRUD</title>
</head>

<body>
	<div>
		<h2>職缺(後台)</h2>

		<form action="insert.controller" method="post">
			<input type="submit" value="Submit">新增職缺
		</form>

		<form action="/select.controller" method="POST">
			<input type="submit" value="Submit">查詢
		</form>
	</div>
	<hr>

	<table id="showInsert"></table>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			$.ajax({
				type: 'POST',
				url: '/morari/work/jobShowAll.controller',
				contentType: 'application/json',
				//data: JSON.stringify(getFormData($("#insert"))),
				success: function (response) {
					$('#showInsert').empty("");

					if (response == null) {
						$('table').prepend("<tr><td colspan='2'>暫無資料</td></tr>");
					} else {
						var h3 = $('#su');
						//h3.prepend('新增成功');
						var table = $('#showInsert');
						table.append("<tr><th>會員編號</th><th>刊登編號</th><th>刊登時間</th><th>職缺</th><th>薪資</th><th>人數</th><th>地點</th><th>可上班日期</th><th>可上班時段</th><th>備註</th><th>照片</th></tr>");


						$.each(response, function (i, n) {
							console.log("response:" + response);
							var tr = "<tr align='center'>" + "<td>" + n.userprofiles.uid + "</td>" + "<td>" + n.rackid + "</td>" + "<td>" + n.rackup + "</td>" + "<td>" + n.job + "</td>" + "<td>" + n.salary + "</td>" + "<td>" + n.quantity + "</td>" + "<td>" + n.place + "</td>" + "<td>" + n.date + "</td>" + "<td>" + n.time + "</td>" + "<td>" + n.remark + "</td>" + "<td>" + n.img + "</td>" + "</tr>";
							table.append(tr);
						});
					}
				}
			});
		});

	</script>
</body>

</html>